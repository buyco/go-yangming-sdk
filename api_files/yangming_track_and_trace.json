{
  "openapi": "3.0.1",
  "info": {
    "title": "Yang Ming Track and Trace API",
    "description": "API specifications for the Track and Trace interface standard",
    "contact": {
      "name": "Yang Ming Marine Transport",
      "email": "itcs@yangming.com"
    },
    "license": {
      "name": "Yang Ming Marine Transport - Website",
      "url": "https://www.yangming.com"
    },
    "version": "DCSA Standard"
  },
  "servers": [
    {
      "url": "https://api.yangming.com/open/dcsa/api/tnt"
    }
  ],
  "tags": [
    {
      "name": "Events",
      "description": "Event operations"
    }
  ],
  "paths": {
    "/1.1.0/events": {
      "get": {
        "tags": [
          "Events"
        ],
        "summary": "Find events by Booking Reference, Bill of Lading or Equipment Reference.",
        "description": "Returns all events related to the query parameter. The endpoint requires at least 1 of the 3 query parameters to be used.",
        "operationId": "v110GGetEvents",
        "parameters": [
          {
            "name": "KeyId",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "default": "Assigned API Key"
            }
          },
          {
            "name": "bookingReference",
            "in": "query",
            "description": "The identifier for a shipment, which is issued by and unique within each of the carriers.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "E123456789"
          },
          {
            "name": "billOfLadingNumber",
            "in": "query",
            "description": "Bill of lading number is an identifier that links to a shipment. Bill of Lading is the legal document issued to the customer, which confirms the carrier's receipt of the cargo from the customer acknowledging goods being shipped and specifying the terms of delivery.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "W123456789"
          },
          {
            "name": "equipmentReference",
            "in": "query",
            "description": "The unique identifier for the equipment, which should follow the BIC ISO Container Identification Number where possible.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "YMLU1234567"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/events"
                }
              }
            }
          },
          "400": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "equipmentEvent": {
        "required": [
          "UNLocationCode",
          "emptyIndicatorCode",
          "equipmentReference",
          "eventClassifierCode",
          "eventDateTime",
          "eventID",
          "eventTypeCode",
          "facilityCode",
          "facilityTypeCode"
        ],
        "type": "object",
        "properties": {
          "eventID": {
            "type": "string",
            "description": "The unique identifier for the Equipment Event ID/Transport Event ID/Shipment Event ID.",
            "example": "CTR_689389697_7"
          },
          "eventDateTime": {
            "type": "string",
            "description": "The local date and time, where the event took place, in ISO 8601 format.",
            "format": "date-time",
            "example": "2019-11-12T07:41:00+08:30"
          },
          "eventClassifierCode": {
            "type": "string",
            "description": "Code for the event classifier, either PLN, ACT or EST.",
            "example": "ACT"
          },
          "eventTypeCode": {
            "type": "string",
            "description": "Unique identifier for Event Type Code.",
            "example": "ARRI"
          },
          "equipmentReference": {
            "type": "string",
            "description": "The unique identifier for the equipment, which should follow the BIC ISO Container Identification Number where possible. If a container is not yet assigned to a shipment, the interface cannot return any information when an equipment reference is given as input. If a container is assigned to an (active) shipment, the interface returns information on the active shipment.",
            "example": "YMLU1234567"
          },
          "facilityTypeCode": {
            "type": "string",
            "description": "The code to identify the specific type of facility.",
            "example": "POTE"
          },
          "UNLocationCode": {
            "type": "string",
            "description": "The UN Location Code identifies a location in the sense of a city/a town/a village, being the smaller administrative area existing as defined by the competent national authority in each country.",
            "example": "USNYC"
          },
          "facilityCode": {
            "type": "string",
            "description": "The code used for identifying the specific facility.",
            "example": "AEAUHADT"
          },
          "otherFacility": {
            "type": "string",
            "description": "An alternative way to capture the facility when no standardized DCSA facility code can be found.",
            "example": "Depot location or address"
          },
          "emptyIndicatorCode": {
            "type": "string",
            "description": "Code to denote whether the equipment is empty or laden.",
            "example": "Empty"
          }
        },
        "description": "The equipment event entity is a specialization of the event entity to support specification of data that only applies to an equipment event."
      },
      "event": {
        "type": "object",
        "anyOf": [
          {
            "$ref": "#/components/schemas/equipmentEvent"
          },
          {
            "$ref": "#/components/schemas/transportEvent"
          },
          {
            "$ref": "#/components/schemas/transportEquipmentEvent"
          }
        ]
      },
      "events": {
        "required": [
          "events"
        ],
        "type": "object",
        "properties": {
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/event"
            }
          }
        },
        "description": "List of events for shipment journey."
      },
      "transportEquipmentEvent": {
        "required": [
          "UNLocationCode",
          "emptyIndicatorCode",
          "equipmentReference",
          "eventClassifierCode",
          "eventDateTime",
          "eventID",
          "eventTypeCode",
          "facilityCode",
          "facilityTypeCode",
          "modeOfTransportCode",
          "transportLegReference",
          "transportReference"
        ],
        "type": "object",
        "properties": {
          "eventID": {
            "type": "string",
            "description": "The unique identifier for the Equipment Event ID/Transport Event ID/Shipment Event ID.",
            "example": "CTR_689389697_7"
          },
          "eventDateTime": {
            "type": "string",
            "description": "The local date and time, where the event took place, in ISO 8601 format.",
            "format": "date-time",
            "example": "2019-11-12T07:41:00+08:30"
          },
          "eventClassifierCode": {
            "type": "string",
            "description": "Code for the event classifier, either PLN, ACT or EST.",
            "example": "ACT"
          },
          "eventTypeCode": {
            "type": "string",
            "description": "Unique identifier for Event Type Code.",
            "example": "ARRI"
          },
          "transportReference": {
            "type": "string",
            "description": "The reference for the transport, e.g. when the mode of transport is a vessel, the transport reference will be the vessel IMO number.",
            "example": "9648714"
          },
          "transportLegReference": {
            "type": "string",
            "description": "The transport leg reference will be specific per mode of transport:\n\nVessel: Voyage number as specified by the vessel operator\n\nTruck: Not yet specified\n\nRail: Not yet specified\n\nBarge: Not yet specified.",
            "example": "025E"
          },
          "equipmentReference": {
            "type": "string",
            "description": "The unique identifier for the equipment, which should follow the BIC ISO Container Identification Number where possible. If a container is not yet assigned to a shipment, the interface cannot return any information when an equipment reference is given as input. If a container is assigned to an (active) shipment, the interface returns information on the active shipment.",
            "example": "YMLU1234567"
          },
          "facilityTypeCode": {
            "type": "string",
            "description": "The code to identify the specific type of facility.",
            "example": "POTE"
          },
          "UNLocationCode": {
            "type": "string",
            "description": "The UN Location Code identifies a location in the sense of a city/a town/a village, being the smaller administrative area existing as defined by the competent national authority in each country.",
            "example": "USNYC"
          },
          "facilityCode": {
            "type": "string",
            "description": "The code used for identifying the specific facility.",
            "example": "AEAUHADT"
          },
          "otherFacility": {
            "type": "string",
            "description": "An alternative way to capture the facility when no standardized DCSA facility code can be found.",
            "example": "Depot location or address"
          },
          "emptyIndicatorCode": {
            "type": "string",
            "description": "Code to denote whether the equipment is empty or laden.",
            "example": "Empty"
          },
          "modeOfTransportCode": {
            "type": "string",
            "description": "A code specifying a type of transport mode.",
            "example": "1"
          }
        },
        "description": "The transport equipment event entity is a specialization of the event entity to support specification of data that applies to both transport and equipment events."
      },
      "transportEvent": {
        "required": [
          "UNLocationCode",
          "eventClassifierCode",
          "eventDateTime",
          "eventID",
          "eventTypeCode",
          "facilityCode",
          "facilityTypeCode",
          "modeOfTransportCode",
          "transportLegReference",
          "transportReference"
        ],
        "type": "object",
        "properties": {
          "eventID": {
            "type": "string",
            "description": "The unique identifier for the Equipment Event ID/Transport Event ID/Shipment Event ID.",
            "example": "CTR_689389697_7"
          },
          "eventDateTime": {
            "type": "string",
            "description": "The local date and time, where the event took place, in ISO 8601 format.",
            "format": "date-time",
            "example": "2019-11-12T07:41:00+08:30"
          },
          "eventClassifierCode": {
            "type": "string",
            "description": "Code for the event classifier, either PLN, ACT or EST.",
            "example": "ACT"
          },
          "eventTypeCode": {
            "type": "string",
            "description": "Unique identifier for Event Type Code.",
            "example": "ARRI"
          },
          "transportReference": {
            "type": "string",
            "description": "The reference for the transport, e.g. when the mode of transport is a vessel, the transport reference will be the vessel IMO number.",
            "example": "9648714"
          },
          "transportLegReference": {
            "type": "string",
            "description": "The transport leg reference will be specific per mode of transport:\n\nVessel: Voyage number as specified by the vessel operator\n\nTruck: Not yet specified\n\nRail: Not yet specified\n\nBarge: Not yet specified.",
            "example": "025E"
          },
          "facilityTypeCode": {
            "type": "string",
            "description": "The code to identify the specific type of facility.",
            "example": "POTE"
          },
          "UNLocationCode": {
            "type": "string",
            "description": "The UN Location Code identifies a location in the sense of a city/a town/a village, being the smaller administrative area existing as defined by the competent national authority in each country.",
            "example": "USNYC"
          },
          "facilityCode": {
            "type": "string",
            "description": "The code used for identifying the specific facility.",
            "example": "AEAUHADT"
          },
          "otherFacility": {
            "type": "string",
            "description": "An alternative way to capture the facility when no standardized DCSA facility code can be found.",
            "example": "Depot location or address"
          },
          "modeOfTransportCode": {
            "type": "string",
            "description": "A code specifying a type of transport mode.",
            "example": "1"
          }
        },
        "description": "The transport event entity is a specialization of the event entity to support specification of data that only applies to a transport event."
      },
      "error": {
        "required": [
          "errorDateTime",
          "errors",
          "httpMethod",
          "requestUri",
          "statusCode",
          "statusCodeText"
        ],
        "type": "object",
        "properties": {
          "httpMethod": {
            "type": "string",
            "description": "The HTTP request method type.",
            "example": "GET"
          },
          "requestUri": {
            "type": "string",
            "description": "The request URI.",
            "example": "https://api.yangming.com/open/dcsa/api/tnt/1.1.0/events"
          },
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/errors"
            }
          },
          "statusCode": {
            "type": "integer",
            "description": "The HTTP status code.",
            "format": "int32",
            "example": 400
          },
          "statusCodeText": {
            "type": "string",
            "description": "The textual representation of the response status.",
            "example": "Bad Request"
          },
          "errorDateTime": {
            "type": "string",
            "description": "The date and time (in ISO 8601 format) the error occured.",
            "example": "2020-12-17T09:57:25+08:00"
          }
        }
      },
      "errors": {
        "required": [
          "message",
          "reason"
        ],
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "High level error message:\n\n 1.invalidQuery\n\n 2.noDataFound\n\n 3.systemException.",
            "example": "systemException"
          },
          "message": {
            "type": "string",
            "description": "Detailed error message:\n\n 1.invalidQuery: The request did not contain one of the three required query parameters.\n\n 2.noDataFound: No data found for given parameters.\n\n 3.systemException: Exception occurs when calling the API.",
            "example": "Exception occurs when calling the API."
          }
        }
      }
    }
  }
}